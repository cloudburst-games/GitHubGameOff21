[gd_scene load_steps=21 format=2]

[ext_resource path="res://Levels/Common/TransitionMarker/LevelTransitionMarker.tscn" type="PackedScene" id=1]
[ext_resource path="res://Levels/Level5/TerrainLevel5.tscn" type="PackedScene" id=2]
[ext_resource path="res://Systems/SaveSystem/AutosaveArea.tscn" type="PackedScene" id=3]
[ext_resource path="res://Props/WorldInteractable/Bodies/PyramidBody.tscn" type="PackedScene" id=4]
[ext_resource path="res://Levels/Common/LevelLocation/LevelLocation.cs" type="Script" id=5]
[ext_resource path="res://Levels/Common/Navigation/WorldNavigation.cs" type="Script" id=6]
[ext_resource path="res://Levels/Common/Navigation/LevelNPCManager.cs" type="Script" id=7]
[ext_resource path="res://Actors/PortraitPlaceholders/Small/Companion1.PNG" type="Texture" id=8]
[ext_resource path="res://Actors/NPC/NPC.tscn" type="PackedScene" id=9]
[ext_resource path="res://Actors/PortraitPlaceholders/Big/Companion1.PNG" type="Texture" id=10]
[ext_resource path="res://Actors/NPC/Bodies/NPCBodyRed.tscn" type="PackedScene" id=11]
[ext_resource path="res://Actors/PortraitPlaceholders/Big/NPC.PNG" type="Texture" id=12]
[ext_resource path="res://Actors/PortraitPlaceholders/Small/NPC.PNG" type="Texture" id=13]
[ext_resource path="res://Props/WorldInteractable/Bodies/ObeliskBody.tscn" type="PackedScene" id=14]
[ext_resource path="res://Props/WorldInteractable/WorldInteractable.cs" type="Script" id=15]
[ext_resource path="res://Props/WorldInteractable/WorldInteractable.tscn" type="PackedScene" id=16]
[ext_resource path="res://Doodads/WorldObstacles/PalmShrub1.tscn" type="PackedScene" id=17]
[ext_resource path="res://Doodads/WorldObstacles/PalmTree1.tscn" type="PackedScene" id=18]
[ext_resource path="res://Doodads/WorldObstacles/PalmTreePair1.tscn" type="PackedScene" id=19]

[sub_resource type="NavigationPolygon" id=1]
vertices = PoolVector2Array( 176.771, 253.972, 156.555, 273, -31.3398, 360.406, -160.895, 277.656, -180.34, 259.004, -162.747, 176.674, 150.609, 162.998, 211.258, 202.836, -19, 483, -37.5, 502, -160.528, 491.949, -160.528, 467.88, -39.6642, 391.326, -210.91, 124.349, -222.802, 120.187, -0.210526, 7.19426, -179.991, 133.862, -162.879, 304.642, -160.963, 151.7, 154.771, 86.8886, 162.501, 118.997, 366.45, 664.249, 370.612, 739.763, 274.286, 737.385, 157.5, 723, 157.5, 690.5, 163.69, 559.599, -37.5, 510.5, -104, 559, -115, 546, -170.419, 312.182, -228.015, 434.372, -238.87, 418.327, 295.692, 237.918, 288.557, 270.621, 220.772, 271.81, 212.448, 258.134, 417.988, 428.921, 293.18, 370.855, 285.839, 360.844, 287.841, 344.826, 306.529, 343.491, 338.565, 342.824, 371.269, 349.498, 532.117, 431.59, 423.995, 450.946, 528.112, 474.305, 427.999, 477.642, 427.332, 536.375, 427.332, 501.002, 534.786, 497.665, 533.452, 535.041, 430.001, 570.414, 533.452, 559.735, 532.117, 601.782, 423.995, 655.176, 537.456, 621.138, 516.766, 657.846, 404.64, 673.864, 32.5, 627.5, 28.5, 615.5, 31, 580.5, 152.393, 531.057, 29, 551.5, 31.5, 519, 31, 501.5, 169.636, 494.787, 161.906, 524.517, 20, 486.5, 5.5, 480, -191.055, 313.769, -210.898, 307.817, -258.691, 417.855, -295.974, 512.714, -546.861, 529.868, -557.564, 510.841, -530.5, 485, -434, 441, -22.5, 531, -32.5, 560.5, -152.5, 549, -164.776, 499.972, -200.643, 511.77, -161.5, 563.5, -172.5, 564.5, -237.454, 538.199, -197.5, 579.5, -220, 586.5, -266.242, 536.311, -204.151, 260.988, -215.263, 261.782, -352.426, 311.649, -366.101, 287.865, -355.993, 274.783, -226.772, 273.688, -231.5, 599, -480.266, 654.735, -482.049, 621.437, -230.343, 286.387, -283.232, 423.046, -353.615, 339.001, -152.639, 800.413, -160.369, 815.278, -230.532, 815.278, -291.776, 784.359, -288.209, 749.277, -285.83, 731.439, -222.5, 621.5, -294.559, 440.979, -419.021, 407.38, -429.724, 387.163, -417.832, 368.731, -398.21, 354.46, -417.238, 426.407, -281.344, 463.161, -288.423, 493.365, -298.911, 763.548, -545.077, 560.193, -548.05, 590.518, -551.023, 581.004, -355.399, 716.574, -421.4, 719.547, -481.455, 688.627, -487.401, 672.573, -336.372, 704.682, -304.263, 705.276, -85, 690.5, -114.584, 800.413, -43.8266, 818.846, -78.9082, 818.251, -105.071, 811.116, -56.5, 698.5, -44.5, 715, -33.1237, 810.521, -14.0964, 798.629, -24.5, 717.5, -17.5, 725, 3.5, 730, 24.5529, 801.602, 145.257, 847.981, 92.9324, 843.819, 41.7965, 820.035, 19, 728.5, 150.609, 790.899, 160.717, 812.9, 158.339, 837.873, 27, 719.5, 102.5, 716.5, 116.5, 728, 146.5, 732, 164.285, 779.007, 221.961, 751.656, 236.826, 737.385, 351.585, 751.656, 286.178, 749.277 )
polygons = [ PoolIntArray( 0, 1, 2, 3, 4, 5, 6, 7 ), PoolIntArray( 8, 9, 10, 11, 12 ), PoolIntArray( 13, 14, 15, 16 ), PoolIntArray( 17, 3, 2, 12 ), PoolIntArray( 18, 16, 15, 19, 20, 6 ), PoolIntArray( 21, 22, 23, 24, 25, 26 ), PoolIntArray( 10, 9, 27, 28, 29 ), PoolIntArray( 30, 17, 12, 11, 31, 32 ), PoolIntArray( 7, 33, 34, 35, 36 ), PoolIntArray( 7, 36, 0 ), PoolIntArray( 37, 38, 39, 40, 41, 42, 43, 44 ), PoolIntArray( 45, 37, 44, 46 ), PoolIntArray( 47, 45, 46 ), PoolIntArray( 48, 49, 47, 46, 50, 51, 52 ), PoolIntArray( 52, 51, 53, 54, 55 ), PoolIntArray( 55, 54, 56, 57, 22, 58 ), PoolIntArray( 21, 58, 22 ), PoolIntArray( 26, 25, 59, 60, 61, 62 ), PoolIntArray( 62, 61, 63, 64 ), PoolIntArray( 62, 64, 65 ), PoolIntArray( 12, 66, 67, 62, 65, 68 ), PoolIntArray( 12, 68, 69 ), PoolIntArray( 12, 69, 8 ), PoolIntArray( 70, 30, 32 ), PoolIntArray( 71, 70, 32, 72 ), PoolIntArray( 73, 74, 75, 76, 77 ), PoolIntArray( 78, 79, 28, 27 ), PoolIntArray( 10, 29, 80, 81 ), PoolIntArray( 82, 81, 80, 83, 84, 85 ), PoolIntArray( 85, 84, 86, 87, 88 ), PoolIntArray( 5, 18, 6 ), PoolIntArray( 5, 4, 89, 90 ), PoolIntArray( 91, 92, 93, 5, 90, 94 ), PoolIntArray( 88, 87, 95, 96, 97, 73 ), PoolIntArray( 91, 98, 71, 72, 99, 100 ), PoolIntArray( 101, 102, 103, 104, 105, 106, 107 ), PoolIntArray( 108, 109, 110, 111, 112, 100, 99 ), PoolIntArray( 91, 94, 98 ), PoolIntArray( 113, 109, 108, 114, 115, 73 ), PoolIntArray( 104, 116, 105 ), PoolIntArray( 77, 113, 73 ), PoolIntArray( 117, 74, 73 ), PoolIntArray( 118, 119, 117, 73, 97 ), PoolIntArray( 120, 121, 122, 123, 96, 95, 107, 124 ), PoolIntArray( 125, 124, 107 ), PoolIntArray( 106, 125, 107 ), PoolIntArray( 101, 107, 126, 127 ), PoolIntArray( 128, 129, 130, 127, 126, 131, 132, 133 ), PoolIntArray( 134, 133, 132, 135, 136 ), PoolIntArray( 134, 136, 137, 138 ), PoolIntArray( 139, 140, 141, 138, 137, 142, 143, 144, 145 ), PoolIntArray( 143, 142, 146, 147, 148 ), PoolIntArray( 143, 148, 149, 150 ), PoolIntArray( 151, 150, 149, 24, 152 ), PoolIntArray( 153, 154, 23, 22 ), PoolIntArray( 152, 24, 23 ) ]
outlines = [ PoolVector2Array( -222.802, 120.187, -210.91, 124.349, -179.991, 133.862, -160.963, 151.7, -162.747, 176.674, -355.993, 274.783, -366.101, 287.865, -352.426, 311.649, -353.615, 339.001, -398.21, 354.46, -417.832, 368.731, -429.724, 387.163, -419.021, 407.38, -417.238, 426.407, -434, 441, -530.5, 485, -557.564, 510.841, -546.861, 529.868, -545.077, 560.193, -551.023, 581.004, -548.05, 590.518, -482.049, 621.437, -480.266, 654.735, -487.401, 672.573, -481.455, 688.627, -421.4, 719.547, -355.399, 716.574, -336.372, 704.682, -304.263, 705.276, -285.83, 731.439, -288.209, 749.277, -298.911, 763.548, -291.776, 784.359, -230.532, 815.278, -160.369, 815.278, -152.639, 800.413, -114.584, 800.413, -105.071, 811.116, -78.9082, 818.251, -43.8266, 818.846, -33.1237, 810.521, -14.0964, 798.629, 24.5529, 801.602, 41.7965, 820.035, 92.9324, 843.819, 145.257, 847.981, 158.339, 837.873, 160.717, 812.9, 150.609, 790.899, 164.285, 779.007, 221.961, 751.656, 236.826, 737.385, 274.286, 737.385, 286.178, 749.277, 351.585, 751.656, 370.612, 739.763, 516.766, 657.846, 537.456, 621.138, 532.117, 601.782, 533.452, 559.735, 533.452, 535.041, 534.786, 497.665, 528.112, 474.305, 532.117, 431.59, 371.269, 349.498, 338.565, 342.824, 306.529, 343.491, 287.841, 344.826, 285.839, 360.844, 293.18, 370.855, 417.988, 428.921, 423.995, 450.946, 427.999, 477.642, 427.332, 501.002, 427.332, 536.375, 430.001, 570.414, 423.995, 655.176, 404.64, 673.864, 366.45, 664.249, 163.69, 559.599, 152.393, 531.057, 161.906, 524.517, 169.636, 494.787, -39.6642, 391.326, -31.3398, 360.406, 156.555, 273, 176.771, 253.972, 212.448, 258.134, 220.772, 271.81, 288.557, 270.621, 295.692, 237.918, 211.258, 202.836, 150.609, 162.998, 162.501, 118.997, 154.771, 86.8886, -0.210526, 7.19426 ), PoolVector2Array( -283.232, 423.046, -258.691, 417.855, -238.87, 418.327, -228.015, 434.372, -160.528, 467.88, -160.528, 491.949, -164.776, 499.972, -200.643, 511.77, -237.454, 538.199, -266.242, 536.311, -295.974, 512.714, -288.423, 493.365, -281.344, 463.161, -294.559, 440.979 ), PoolVector2Array( -204.151, 260.988, -180.34, 259.004, -160.895, 277.656, -162.879, 304.642, -170.419, 312.182, -191.055, 313.769, -210.898, 307.817, -230.343, 286.387, -226.772, 273.688, -215.263, 261.782 ), PoolVector2Array( -19, 483, 5.5, 480, 20, 486.5, 31, 501.5, 31.5, 519, 29, 551.5, 31, 580.5, 28.5, 615.5, 32.5, 627.5, 157.5, 690.5, 157.5, 723, 146.5, 732, 116.5, 728, 102.5, 716.5, 27, 719.5, 19, 728.5, 3.5, 730, -17.5, 725, -24.5, 717.5, -44.5, 715, -56.5, 698.5, -85, 690.5, -222.5, 621.5, -231.5, 599, -220, 586.5, -197.5, 579.5, -172.5, 564.5, -161.5, 563.5, -152.5, 549, -115, 546, -104, 559, -32.5, 560.5, -22.5, 531, -37.5, 510.5, -37.5, 502 ) ]

[node name="Level5" type="Node2D"]
script = ExtResource( 5 )
LevelName = "Southern Lunu"

[node name="Terrain" parent="." instance=ExtResource( 2 )]

[node name="All" type="YSort" parent="."]

[node name="Units" type="YSort" parent="All"]

[node name="LevelNPCManager" type="YSort" parent="All/Units"]
script = ExtResource( 7 )

[node name="Mahef" parent="All/Units/LevelNPCManager" instance=ExtResource( 9 )]
position = Vector2( 486.455, 526.869 )
_defeatMessage = ""
ID = "Mahef"
UnitName = "Mahef the Ferrybug"
PortraitPath = ExtResource( 10 )
PortraitPathSmall = ExtResource( 8 )
_body = ExtResource( 11 )
_startingBehaviour = 2
_combatLevel = 10
_minions = {
0: 2
}
_startingSpell1 = 1
_startingSpell2 = 3
_startingGold = 100
_itemsHeld = [ 4, 7, 10 ]
_potionEquipped1 = 4
_potionEquipped2 = 7
_potionEquipped3 = 3
_weaponEquipped = 10
_armourEquipped = 14

[node name="Position2D" type="Position2D" parent="All/Units/LevelNPCManager/Mahef"]
position = Vector2( -19.7419, -115.033 )

[node name="Position2D2" type="Position2D" parent="All/Units/LevelNPCManager/Mahef"]
position = Vector2( -11.7241, 135.94 )

[node name="Bandit7" parent="All/Units/LevelNPCManager" instance=ExtResource( 9 )]
position = Vector2( -142.001, 402.254 )
_customBattleText = "You're leg catches upon something and you fall upon the sand. Your feet are bound! An assassin lowers a dagger to your heart. You call upon the might of Ra and fling them across the land."
_defeatMessage = "Before the assassin rattles his final breath, you scream, \"Who sent you?\". The creature's mouth opens, \"A...\" he says, then his body seizes and stills forever."
ID = "Bandit5"
UnitName = "Assassin"
PortraitPath = ExtResource( 12 )
PortraitPathSmall = ExtResource( 13 )
_startingBools = {
"Companion": false,
"Hostile": true,
"InitiatesDialogue": false
}
_startingBehaviour = 2
_combatLevel = 8
_minions = {
0: 2
}
_startingSpell1 = 2
_startingSpell2 = 5
_startingGold = 12
_itemsHeld = [ 9 ]
_potionEquipped1 = 1
_potionEquipped2 = 3
_potionEquipped3 = 1
_weaponEquipped = 10
_armourEquipped = 12

[node name="Position2D" type="Position2D" parent="All/Units/LevelNPCManager/Bandit7"]
position = Vector2( -179.354, -110.447 )

[node name="Position2D2" type="Position2D" parent="All/Units/LevelNPCManager/Bandit7"]
position = Vector2( 262.787, 96.8253 )

[node name="Assassin2" parent="All/Units/LevelNPCManager" instance=ExtResource( 9 )]
position = Vector2( -169.221, 716.489 )
_customBattleText = "A scarab hobbles towards you. You step aside to let him pass. He mutters a chant you recognise... Demon! Prepare for battle!"
_defeatMessage = "You have won, this time. How many more demons lie in wait?"
ID = "Assassin0"
UnitName = "Guardian of the Sea"
PortraitPath = ExtResource( 12 )
PortraitPathSmall = ExtResource( 13 )
_startingBools = {
"Companion": false,
"Hostile": true,
"InitiatesDialogue": false
}
_startingBehaviour = 0
_combatLevel = 8
_minions = {
0: 2
}
_startingSpell1 = 9
_startingSpell2 = 6
_startingGold = 20
_itemsHeld = [ 4 ]
_potionEquipped1 = 2
_potionEquipped2 = 7
_weaponEquipped = 10
_armourEquipped = 12

[node name="TransitionMarkers" type="YSort" parent="All"]

[node name="LevelTransitionMarker" parent="All/TransitionMarkers" instance=ExtResource( 1 )]
position = Vector2( 3.09755, 52.3196 )
ButtonLabel = "To Central Lunu"
DestinationLevel = 1

[node name="PositionMarkers" type="YSort" parent="All"]

[node name="PlayerPositionMarker" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -33.2629, 55.2425 )

[node name="CompanionPositionMarker1" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( 45.8072, 75.0095 )

[node name="CompanionPositionMarker2" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( 27.1372, 98.9374 )

[node name="CompanionPositionMarker3" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -13.7729, 90.8505 )

[node name="CompanionPositionMarker4" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( 13.4471, 61.7495 )

[node name="CompanionPositionMarker5" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -54.5986, 88.2041 )

[node name="CompanionPositionMarker6" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -20.2629, 65.5705 )

[node name="AutosaveAreas" type="YSort" parent="All"]

[node name="AutosaveArea" parent="All/AutosaveAreas" instance=ExtResource( 3 )]
position = Vector2( -12.5111, 224.18 )

[node name="Obstacles" type="YSort" parent="All"]

[node name="InvisibleWall" type="StaticBody2D" parent="All/Obstacles"]
position = Vector2( 0.898376, 1022.86 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="All/Obstacles/InvisibleWall"]
position = Vector2( -107.943, -965.14 )
polygon = PoolVector2Array( -128.024, 60.7027, 105.764, -56.6257, 275.536, 26.9977, 271.608, 30.9263, 106.887, -52.6971, -124.019, 64.7073 )

[node name="PalmShrub1" parent="All/Obstacles" instance=ExtResource( 17 )]
position = Vector2( 286.059, 721.816 )

[node name="PalmTree1" parent="All/Obstacles" instance=ExtResource( 18 )]
position = Vector2( 208.432, 239.063 )

[node name="PalmTreePair1" parent="All/Obstacles" instance=ExtResource( 19 )]
position = Vector2( -523.568, 489.063 )

[node name="Shops" type="YSort" parent="All"]

[node name="WorldInteractables" type="YSort" parent="All"]

[node name="Obelisk" type="StaticBody2D" parent="All/WorldInteractables" instance=ExtResource( 16 )]
position = Vector2( 324.909, 359.438 )
script = ExtResource( 15 )
_bodyScn = ExtResource( 14 )
_attributePoints = 6
_flavourText = "A mysterious shrine. I feel my power growing!"
_eventText = "Obelisk activated."

[node name="Pyramid" type="StaticBody2D" parent="All/WorldInteractables" instance=ExtResource( 16 )]
position = Vector2( -423.097, 535.736 )
script = ExtResource( 15 )
_bodyScn = ExtResource( 4 )
_experience = 200.0
_startingItems = [ 5, 4 ]
_flavourText = "Whispers! I gain knowledge from the dead."
_eventText = "Pyramid explored."

[node name="Chest" type="StaticBody2D" parent="All/WorldInteractables" instance=ExtResource( 16 )]
position = Vector2( 82.6994, 774.541 )
script = ExtResource( 15 )
_gold = 68
_startingItems = [ 10, 12 ]
_dieOnActivate = true
_flavourText = "A blessing from my fellow gods."
_eventText = "Treasure chest plundered."

[node name="Chest2" type="StaticBody2D" parent="All/WorldInteractables" instance=ExtResource( 16 )]
position = Vector2( 379.703, 381.659 )
script = ExtResource( 15 )
_gold = 112
_startingItems = [ 2, 6, 0 ]
_dieOnActivate = true
_flavourText = "Treasure! My bag grows fat."
_eventText = "Treasure chest plundered."

[node name="Chest3" type="StaticBody2D" parent="All/WorldInteractables" instance=ExtResource( 16 )]
position = Vector2( 136.763, 606.355 )
script = ExtResource( 15 )
_gold = 142
_startingItems = [ 11, 3 ]
_dieOnActivate = true
_flavourText = "A crate of treasure – what luck!"
_eventText = "Treasure chest plundered."

[node name="WorldNavigation" type="Navigation2D" parent="."]
script = ExtResource( 6 )

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="WorldNavigation"]
navpoly = SubResource( 1 )
