[gd_scene load_steps=14 format=2]

[ext_resource path="res://Levels/Common/Navigation/LevelNPCManager.cs" type="Script" id=1]
[ext_resource path="res://Systems/SaveSystem/AutosaveArea.tscn" type="PackedScene" id=2]
[ext_resource path="res://Levels/Common/LevelLocation/LevelLocation.cs" type="Script" id=3]
[ext_resource path="res://Props/Buildings/Shop/Shop.tscn" type="PackedScene" id=4]
[ext_resource path="res://Levels/Common/Navigation/WorldNavigation.cs" type="Script" id=5]
[ext_resource path="res://Levels/Level3/TerrainLevel3.tscn" type="PackedScene" id=6]
[ext_resource path="res://Levels/Common/TransitionMarker/LevelTransitionMarker.tscn" type="PackedScene" id=7]
[ext_resource path="res://Actors/PortraitPlaceholders/Big/Companion2.PNG" type="Texture" id=8]
[ext_resource path="res://Actors/NPC/NPC.tscn" type="PackedScene" id=9]
[ext_resource path="res://Actors/PortraitPlaceholders/Big/NPC.PNG" type="Texture" id=10]
[ext_resource path="res://Actors/PortraitPlaceholders/Small/NPC.PNG" type="Texture" id=11]
[ext_resource path="res://Actors/PortraitPlaceholders/Small/Companion2.PNG" type="Texture" id=12]

[sub_resource type="NavigationPolygon" id=1]
vertices = PoolVector2Array( 30.5911, 935.545, 5.19263, 1016.5, -155.135, 938.72, -96.401, 910.147, 25.8289, 899.035, 87.7375, 972.056, 29.0037, 873.637, -96.401, 879.986, 22.6541, 849.826, -96.401, 840.301, 89.3249, 778.393, 89.3249, 802.204, 70.2761, 822.84, -96.401, 799.029, -90.0514, 759.344, 16.3044, 743.47, 149.646, 595.842, 155.996, 654.575, 84.5627, 684.736, 32.1785, 700.61, -75.7648, 260.9, -24.968, 246.613, 46.4651, 249.788, -97.9884, 741.882, -290.064, 646.638, -282.127, 589.492, 343.309, 432.339, 349.659, 489.486, 275.051, 364.081, 165.52, 270.424, 206.793, 270.424, 275.051, 298.998, 148.059, 283.124, -121.799, 238.676, -350.385, 556.157, -350.385, 497.423, -183.708, 256.138, 340.134, 395.829, 117.898, 284.711, -396.42, 295.823, -331.336, 264.075, -259.903, 241.851, -415.469, 452.975, -412.294, 375.193, -420.231, 318.046 )
polygons = [ PoolIntArray( 0, 1, 2, 3, 4 ), PoolIntArray( 0, 5, 1 ), PoolIntArray( 6, 4, 3, 7, 8 ), PoolIntArray( 8, 7, 9 ), PoolIntArray( 10, 11, 12, 8, 9, 13, 14, 15 ), PoolIntArray( 16, 17, 18, 19, 20, 21, 22 ), PoolIntArray( 23, 24, 25, 20, 19, 15 ), PoolIntArray( 26, 27, 16, 28 ), PoolIntArray( 15, 14, 23 ), PoolIntArray( 29, 30, 31, 28, 16, 32 ), PoolIntArray( 33, 20, 25, 34, 35, 36 ), PoolIntArray( 28, 37, 26 ), PoolIntArray( 38, 32, 16 ), PoolIntArray( 22, 38, 16 ), PoolIntArray( 39, 40, 41, 36, 35, 42, 43 ), PoolIntArray( 39, 43, 44 ) ]
outlines = [ PoolVector2Array( -155.135, 938.72, 5.19263, 1016.5, 87.7375, 972.056, 30.5911, 935.545, 25.8289, 899.035, 29.0037, 873.637, 22.6541, 849.826, 70.2761, 822.84, 89.3249, 802.204, 89.3249, 778.393, 16.3044, 743.47, 32.1785, 700.61, 84.5627, 684.736, 155.996, 654.575, 149.646, 595.842, 349.659, 489.486, 343.309, 432.339, 340.134, 395.829, 275.051, 364.081, 275.051, 298.998, 206.793, 270.424, 165.52, 270.424, 148.059, 283.124, 117.898, 284.711, 46.4651, 249.788, -24.968, 246.613, -75.7648, 260.9, -121.799, 238.676, -183.708, 256.138, -259.903, 241.851, -331.336, 264.075, -396.42, 295.823, -420.231, 318.046, -412.294, 375.193, -415.469, 452.975, -350.385, 497.423, -350.385, 556.157, -282.127, 589.492, -290.064, 646.638, -97.9884, 741.882, -90.0514, 759.344, -96.401, 799.029, -96.401, 840.301, -96.401, 879.986, -96.401, 910.147 ) ]

[node name="Level3" type="Node2D"]
script = ExtResource( 3 )
LevelName = "Upper Lunu"

[node name="Terrain" parent="." instance=ExtResource( 6 )]

[node name="All" type="YSort" parent="."]

[node name="Units" type="YSort" parent="All"]

[node name="LevelNPCManager" type="YSort" parent="All/Units"]
script = ExtResource( 1 )

[node name="Ammit" parent="All/Units/LevelNPCManager" instance=ExtResource( 9 )]
position = Vector2( 176.992, 338.049 )
_defeatMessage = "After the traitor takes her last breath, demons of the Netherworld emerge from the sand dunes. They chant a cursed melody and you are engulfed in smoke. In an instant, the dark mist disappears... along with your sun! "
ID = "Ammit"
UnitName = "Ammut"
PortraitPath = ExtResource( 8 )
PortraitPathSmall = ExtResource( 12 )
_startDirection = 4
_combatLevel = 8
_minions = {
0: 2
}
_startingSpell1 = 7
_spellGainedAtHigherLevel = 8
_startingGold = 20
_itemsHeld = [ 3, 11 ]
_potionEquipped1 = 1
_potionEquipped2 = 3
_armourEquipped = 11

[node name="Bandit" parent="All/Units/LevelNPCManager" instance=ExtResource( 9 )]
position = Vector2( 136.558, 534.457 )
_customBattleText = "A scarab rams into you and wails, 'For the Netherworld!'."
_defeatMessage = "Your enemy lays on his back, his legs wiggling in the air. 'Who sent you?', you ask. 'Look at the sky', he says. 'For it will be the last time you see it this way.'"
ID = "Bandit3"
UnitName = "Servant of Apophis"
_startingBools = {
"Companion": false,
"Hostile": true,
"InitiatesDialogue": false
}
_combatLevel = 6
_minions = {
0: 1
}
_startingGold = 15
_itemsHeld = [ 9, 4 ]
_weaponEquipped = 9

[node name="Bandit1" parent="All/Units/LevelNPCManager" instance=ExtResource( 9 )]
position = Vector2( -205.933, 318.022 )
_customBattleText = "A guard approaches. 'Trespasser! Leave this land'. You reply, 'But I am your King! This land is mine!'. She draws her weapon anyway."
_defeatMessage = "You look upon her empty shell with pity. What is happening to the citizens of Lunu?"
ID = "Bandit4"
UnitName = "Crazed Guard"
_startingBools = {
"Companion": false,
"Hostile": true,
"InitiatesDialogue": false
}
_combatLevel = 7
_minions = {
0: 3
}
_startingGold = 15
_itemsHeld = [ 9, 1 ]
_weaponEquipped = 9

[node name="Ambush" parent="All/Units/LevelNPCManager" instance=ExtResource( 9 )]
position = Vector2( -255.88, 503.538 )
_customBattleText = "AMBUSH! Demons of the Netherworld emerge from the sand dunes. They chant a cursed melody and you are engulfed in smoke. In an instant, the smoke disappears... along with your sun! "
_defeatMessage = "You have defeated all who remained but too many escaped. And your sun is in the hands of the demons beneath! You must find Mahef in Southern Lunu and travel to the Netherworld at once!"
ID = "Ambush"
UnitName = "Scarab of the Netherworld"
PortraitPath = ExtResource( 10 )
PortraitPathSmall = ExtResource( 11 )
_active = false
_startingBools = {
"Companion": false,
"Hostile": true,
"InitiatesDialogue": false
}
_combatLevel = 6
_minions = {
0: 3
}
_physicalDamageRange = 2.0
_startingSpell1 = 6
_startingSpell2 = 9
_startingGold = 21
_itemsHeld = [ 1, 2, 4, 5 ]
_potionEquipped1 = 3
_potionEquipped2 = 2
_potionEquipped3 = 5

[node name="TransitionMarkers" type="YSort" parent="All"]

[node name="LevelTransitionMarker" parent="All/TransitionMarkers" instance=ExtResource( 7 )]
position = Vector2( -21.4723, 962.692 )
ButtonLabel = "To Central Lunu"
DestinationLevel = 1

[node name="PositionMarkers" type="YSort" parent="All"]

[node name="PlayerPositionMarker" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -27.6668, 930.664 )

[node name="CompanionPositionMarker1" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( 10.9702, 902.863 )

[node name="CompanionPositionMarker2" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -7.69978, 926.791 )

[node name="CompanionPositionMarker3" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -48.6099, 918.704 )

[node name="CompanionPositionMarker4" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -21.3899, 889.603 )

[node name="CompanionPositionMarker5" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -62.4498, 941.456 )

[node name="CompanionPositionMarker6" type="Position2D" parent="All/PositionMarkers"]
position = Vector2( -55.0999, 893.424 )

[node name="AutosaveAreas" type="YSort" parent="All"]

[node name="AutosaveArea" parent="All/AutosaveAreas" instance=ExtResource( 2 )]
position = Vector2( -52.2069, 648.092 )

[node name="Obstacles" type="YSort" parent="All"]

[node name="InvisibleWall4" type="StaticBody2D" parent="All/Obstacles"]
position = Vector2( -65.4628, 990.256 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="All/Obstacles/InvisibleWall4"]
polygon = PoolVector2Array( -96.6029, -53.3364, 68.399, 30.2871, 169.421, -21.9074, 176.717, -17.9788, 64.4704, 37.0219, -107.266, -49.4077 )

[node name="Shops" type="YSort" parent="All"]

[node name="Shop" parent="All/Shops" instance=ExtResource( 4 )]
position = Vector2( -60.1873, 449.092 )
_startingItemsStocked = [ 1, 4, 2, 2, 2, 6, 10, 12, 14 ]
_introText = "Welcome! Please, peruse my humble wares. "
_shopTitle = "Glittering Goods"
_buyMessage = "Hmph. Trash. I'll take it of your hands for {0} gold."
_stinginess = 1.5

[node name="WorldNavigation" type="Navigation2D" parent="."]
script = ExtResource( 5 )

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="WorldNavigation"]
navpoly = SubResource( 1 )
